{% extends 'base.html' %}

{% block content %}

<section class="section" style="margin-top: 120px; margin-bottom: 120px">
    <div class="container">
      <!-- Search Bar -->
      <div class="row justify-content-center">
      <!-- Search Results -->
      {% if query %}
        <div class="row justify-content-center">
          <div class="col-lg-10 mb-4">
            <h1 class="h2 mb-4">Search results for 
              <mark>{{ query }}</mark>
            </h1>
          </div>
  
          {% if results %}
            {% for blog in results %}
              <div class="col-lg-10">
                <article class="card mb-4">
                  <div class="row card-body">
                    <div class="col-md-4 mb-4 mb-md-0">
                      <div class="post-slider slider-sm">
                        <!-- Blog image -->
                        <img src="{{ blog.image.url }}" class="card-img" alt="post-thumb" style="height:200px; object-fit: cover;">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <!-- Blog Title -->
                      <h3 class="h4 mb-3">
                        <a class="post-title" href="{{ blog.get_absolute_url }}">{{ blog.title }}</a>
                      </h3>
                      
                      <!-- Blog Meta Info -->
                      <ul class="card-meta list-inline">
                        <li class="list-inline-item">
                          <a href="{{ blog.author.get_absolute_url }}" class="card-meta-author">
                            <img src="{{ blog.author.author.image.url }}" alt="{{ blog.author.username }}">
                            <span>{{ blog.author.username }}</span>
                          </a>
                        </li>
                        <li class="list-inline-item">
                          <i class="ti-timer"></i>{{ blog.read_time }} Min To Read
                        </li>
                        <li class="list-inline-item">
                          <i class="ti-calendar"></i>{{ blog.date_published|date:"d M, Y" }}
                        </li>
                        <li class="list-inline-item">
                          <ul class="card-meta-tag list-inline">
                            {% for tag in blog.tags.all %}
                              <li class="list-inline-item"><a href="#">{{ tag.name }}</a></li>
                            {% endfor %}
                          </ul>
                        </li>
                      </ul>
  
                      <!-- Blog Excerpt -->
                      <p>{{ blog.body|safe|truncatewords:30 }}</p>
                      <a href="{{ blog.get_absolute_url }}" class="btn btn-outline-primary">Read More</a>
                    </div>
                  </div>
                </article>
              </div>
            {% endfor %}
          {% else %}
            <!-- No Results -->
            <div class="col-lg-10">
              <p>No results found for "{{ query }}".</p>
            </div>
          {% endif %}
        </div>
      {% endif %}
    </div>
</section>

{% endblock %}